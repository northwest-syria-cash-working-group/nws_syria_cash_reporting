filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = wounded_dead_100k)) +
geom_point(aes(size = beneficiaries)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000)) +
scale_y_log10() +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Dead and wounded per 100,000 persons")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = wounded_dead_100k)) +
geom_point(aes(size = beneficiaries)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(labels = comma) +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Dead and wounded per 100,000 persons")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(labels = comma) +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Dead and wounded per 100,000 persons")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
ggplot(aes(x = wounded_dead_100k)) +
geom_histogram()
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Beneficiaries",
size = "Dead/wounded\nper 100k")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
geom_smooth(method = "lm", se = FALSE, colour = "blue")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = damaged_houses_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
geom_smooth(method = "lm", se = FALSE, colour = "blue") +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Beneficiaries",
size = "Dead/wounded\nper 100k")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
geom_smooth(method = "lm", se = FALSE, colour = "blue") +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Beneficiaries",
size = "Dead/wounded\nper 100k")
fsl %>% filter(str_detect(sub_district, "Kafr"))
fsl %>% filter(str_detect(sub_district, "Kafr")) %>% pull(sub_district)
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
geom_smooth(method = "lm", se = FALSE, colour = "blue") +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Beneficiaries",
size = "Dead/wounded\nper 100k",
caption = "Data from Assistance Coordination Unit and Food Security Cluster")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
geom_smooth(method = "lm", se = FALSE, colour = "blue") +
labs(title = "Population and casualties per 100,000, sub-districts",
x = "Population",
y = "Beneficiaries",
size = "Dead/wounded\nper 100k",
caption = "Data from Assistance Coordination Unit and Food Security Cluster") +
theme(plot.caption = element_text(hjust = .5))
fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
mutate(governorate = ifelse(governorate == "idleb", "Idleb", governorate),
district = ifelse(district == "idleb", "Idleb", district)) %>%
group_by(governorate, district) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)) %>%
mutate(district = fct_reorder(district, beneficiaries),
governorate = fct_relevel(governorate,
c("Idlib", "Aleppo"))) %>%
ggplot(aes(x = beneficiaries, y = district)) +
geom_col(aes(fill = governorate)) +
geom_text(aes(label = comma(beneficiaries)),
hjust = "inward") +
scale_fill_viridis_d(begin = .3) +
labs(title = "MPC beneficiaries by district",
subtitle = "as of 17 March 2023",
y = "") +
scale_x_continuous(labels = comma) +
theme(legend.position = "none") +
hno %>%
filter(admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate = admin1name_en, district = admin2name_en) %>%
summarise(total_population = sum(total_population, na.rm = TRUE)) %>%
left_join(
fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
mutate(governorate = ifelse(governorate == "idleb", "Idleb", governorate),
district = ifelse(district == "idleb", "Idleb", district)) %>%
group_by(district) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)) ,
by = "district") %>%
mutate(district = fct_reorder(district, beneficiaries),
governorate = fct_relevel(governorate,
c("Idlib", "Aleppo")),
pc_reached = round(beneficiaries / total_population * 100, digits = 2)) %>%
ggplot(aes(x = pc_reached, y = district)) +
geom_col(aes(fill = governorate)) +
geom_text(aes(label = comma(pc_reached)),
hjust = "inward") +
scale_fill_viridis_d(begin = .3) +
labs(title = "Percent of population reached",
subtitle = "as of 17 March 2023",
y = "",
x = "% of population reached") +
theme(legend.position = "none")
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
check_overlap = TRUE,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
geom_smooth(method = "lm", se = FALSE, colour = "blue") +
labs(title = "Population and beneficiaries by sub-district",
subtitle = "Size indicates dead/wounded per 100,0000",
x = "Population",
y = "Beneficiaries",
size = "Dead/wounded\nper 100k",
caption = "Data from Assistance Coordination Unit and Food Security and Livelihoods Cluster") +
theme(plot.caption = element_text(hjust = .5))
eq %>%
filter(admin3pcode %in% nw_pcode3 &
district %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(governorate, district, sub_district, admin3pcode) %>%
summarise(casualties = sum(casualties, na.rm = TRUE),
injuries = sum(injuries, na.rm = TRUE),
totally_damaged = sum(completely_destroyed_houses, na.rm = TRUE),
partially_damaged = sum(damaged_unihabitable_houses, na.rm = TRUE)) %>%
# Where is Ariha, and why is it showing up here
filter(district != "Ariha") %>%
left_join(hno %>%
filter(admin3pcode %in% nw_pcode3 &
admin2name_en %in% c("Harim", "Idleb", "Jisr-Ash-Shugur",
"Afrin", "Jebel Saman", "A'zaz", "Jarablus", "Al Bab")) %>%
group_by(admin3pcode) %>%
summarise(population = sum(total_population, na.rm = TRUE)),
by = "admin3pcode") %>%
mutate(wounded_dead = casualties + injuries,
damaged_houses = totally_damaged + partially_damaged,
wounded_dead_100k = round(wounded_dead / population * 100000, digits = 2),
damaged_houses_100k = round(damaged_houses / population * 100000, digits = 2)) %>%
left_join(fsl %>%
filter(activity == "Cash Response" & planned_implemented == "Implemented") %>%
group_by(admin3pcode) %>%
summarise(beneficiaries = sum(beneficiaries, na.rm = TRUE)),
by = "admin3pcode") %>%
ggplot(aes(x = population, y = beneficiaries)) +
geom_point(aes(size = wounded_dead_100k)) +
geom_text(aes(label = sub_district), hjust = 1, vjust = 1,
size = 2) +
scale_x_log10(breaks = c(0, 3000, 10000, 30000, 100000, 300000, 1000000),
labels = comma) +
scale_y_log10(breaks = c(0, 1000, 3000, 10000, 30000, 100000),
labels = comma) +
scale_size(breaks = c(0, 100, 500, 1000, 3000)) +
geom_smooth(method = "lm", se = FALSE, colour = "blue") +
labs(title = "Population and MPC beneficiaries by sub-district",
subtitle = "Size indicates dead/wounded per 100,0000",
x = "Population",
y = "Beneficiaries",
size = "Dead/wounded\nper 100k",
caption = "Data from Assistance Coordination Unit and Food Security and Livelihoods Cluster") +
theme(plot.caption = element_text(hjust = .5))
